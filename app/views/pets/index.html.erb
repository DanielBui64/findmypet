<h1><strong>Lost pets near you</strong></h1>

<div style="width: 100%; height: 600px;"
  data-controller="mapbox"
  data-mapbox-markers-value="<%= @markers.to_json %>"
  data-mapbox-api-key-value="<%= ENV['MAPBOX_API_KEY'] %>"></div>
  <h2><strong>Posters</strong></h2>
<div class="poster-container">
  <% if @posters.any? %>
        <div class="row row-cols-2 row-cols-md-4 gy-3 m-0">
          <% @posters.each do |poster| %>
            <% if poster.pet.user != current_user %>
              <div class="col mb-2">
                <div class="card mx-auto" style="height: 250px; border-radius: 20px; max-width: 170px;">
                  <% photo_url = poster.pet.photos.empty? ? 'https://www.vets4pets.com/globalassets/close-up-of-cat-looking-up.jpg?w=585&scale=down' : cl_image_path(poster.pet.photos[0].key) %>                <div class="parent">
                    <img src="<%= photo_url %>" class="card-img-top image1 rounded-bottom" style="object-fit: cover; border-radius: 19px; height: 130px;" alt="Pet photo">
                    <img src="<%= image_path('overlay.png') %>" class="card-img-top image2 rounded-bottom" style="object-fit: cover; border-radius: 20px; height: 135px;" alt="Overlay">
                  </div>
                  <div class="card-body text-center p-1">
                    <h5 class="card-title" style="font-size: 24px;">
                      <strong><%= poster.pet.name %></strong>
                    </h5>
                    <p class="card-text" style="font-size: 15px;">
                      Last seen:
                    </p>
                    <p class="card-text" style="font-size: 14px; line-height: 1em;">
                      <%= truncate(poster.address) %>
                    </p>
                    <p class="card-text" style="font-size: 15px; line-height: 2em;">
                      <strong><%= poster.date_missing %></strong>
                    </p>
                    <%= link_to "", poster_path(poster.id), class:"stretched-link"%>
                  </div>
                </div>
              </div>
            <% end %>

          <% end %>
        </div>
      <% end %>
</div>
<h2><strong>Reports</strong></h2>
<div class="reports-container">
  <% if @reports.any? %>
        <div class="row row-cols-2 row-cols-md-4 gy-3 m-0">
          <% @reports.each do |report| %>
            <% if report.user != current_user %>
              <div class="col mb-2">
                <div class="card mx-auto" style="height: 250px; border-radius: 20px; max-width: 170px;">
                  <% photo_url = report.photos.empty? ? 'https://www.vets4pets.com/globalassets/close-up-of-cat-looking-up.jpg?w=585&scale=down' : cl_image_path(report.photos[0].key) %>                <div class="parent">
                    <img src="<%= photo_url %>" class="card-img-top image1 rounded-bottom" style="object-fit: cover; border-radius: 19px; height: 130px;" alt="Pet photo">
                    <img src="<%= image_path('overlay.png') %>" class="card-img-top image2 rounded-bottom" style="object-fit: cover; border-radius: 20px; height: 135px;" alt="Overlay">
                  </div>
                  <div class="card-body text-center p-1">
                    <h5 class="card-title" style="font-size: 24px;">
                      <strong><%= report.report_type %> <%= report.species %></strong>
                    </h5>
                    <p class="card-text" style="font-size: 15px;">
                      Last seen:
                    </p>
                    <p class="card-text" style="font-size: 14px; line-height: 1em;">
                      <%= truncate(report.address) %>
                    </p>
                    <p class="card-text" style="font-size: 15px; line-height: 2em;">
                      <strong><%= report.date_spotted %></strong>
                    </p>
                    <%= link_to "", report_path(report.id), class:"stretched-link"%>
                  </div>
                </div>
              </div>
            <% end %>

          <% end %>
        </div>
      <% end %>
</div>
